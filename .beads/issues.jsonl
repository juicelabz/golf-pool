{"id":"golf-pool-3cj","title":"Better-Auth flows + whitelist + role gating","description":"Wire up Better-Auth email/password auth with whitelist signup + role gating.\n\nKey rules:\n- Only public routes: /login and /signup\n- Post-login default route: /leaderboard\n- data role can access admin panel but only sees the Data Import link in src/routes/admin.tsx and can access /data-import\n- Enforce role checks in UI, route loaders, and serverFns that mutate data","status":"open","priority":2,"issue_type":"epic","owner":"cwk29@icloud.com","created_at":"2026-02-06T00:27:58.894129-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-06T00:27:58.894129-05:00","external_ref":"prd:./tasks/prd-better-auth.md"}
{"id":"golf-pool-3cj.1","title":"US-001: Auth API wiring and session retrieval","description":"As a user, I want my session to persist so that I stay logged in across refreshes.\n\n## Acceptance Criteria\n- [ ] Auth API endpoint is available (e.g. /api/auth/*) and correctly handled by the Start server entry\n- [ ] Client can reliably fetch session state (authenticated/unauthenticated + role)\n- [ ] Session retrieval works on initial page load and after navigation\n- [ ] Logout clears session and UI updates immediately\n- [ ] bun --bun run test passes\n- [ ] bun --bun run lint passes","status":"closed","priority":1,"issue_type":"task","owner":"cwk29@icloud.com","created_at":"2026-02-06T00:28:48.765246-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-07T22:22:40.515507-05:00","closed_at":"2026-02-07T22:22:40.515507-05:00","close_reason":"Closed","dependencies":[{"issue_id":"golf-pool-3cj.1","depends_on_id":"golf-pool-3cj","type":"parent-child","created_at":"2026-02-06T00:28:48.772232-05:00","created_by":"Cody Kuykendall"}]}
{"id":"golf-pool-3cj.2","title":"US-002: Signup flow with whitelist enforcement","description":"As an allowed user, I want to sign up with email/password so that I can access the app.\n\n## Acceptance Criteria\n- [ ] /signup route renders signup form (email + password)\n- [ ] Signup validates whitelist using whitelist.json with rules: trim + lowercase + exact match\n- [ ] Non-whitelisted signup fails with a generic “not allowed” message (no additional disclosure)\n- [ ] Whitelisted signup succeeds and lands user in a logged-in state\n- [ ] bun --bun run test passes\n- [ ] bun --bun run lint passes","status":"closed","priority":1,"issue_type":"task","owner":"cwk29@icloud.com","created_at":"2026-02-06T00:28:59.226627-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-08T00:20:52.221167-05:00","closed_at":"2026-02-08T00:20:52.221167-05:00","close_reason":"Completed whitelist-enforced signup flow with generic denial messaging and whitelist normalization tests.","dependencies":[{"issue_id":"golf-pool-3cj.2","depends_on_id":"golf-pool-3cj","type":"parent-child","created_at":"2026-02-06T00:28:59.230399-05:00","created_by":"Cody Kuykendall"},{"issue_id":"golf-pool-3cj.2","depends_on_id":"golf-pool-3cj.1","type":"blocks","created_at":"2026-02-06T00:31:09.479177-05:00","created_by":"Cody Kuykendall"}]}
{"id":"golf-pool-3cj.3","title":"US-003: Login flow and default redirect","description":"As a user with an account, I want to log in so that I can use the app.\n\n## Acceptance Criteria\n- [ ] /login route renders login form (email + password)\n- [ ] Successful login redirects to /leaderboard\n- [ ] Invalid credentials show a safe, clear error message\n- [ ] Logged-in users visiting /login or /signup are redirected to /leaderboard\n- [ ] bun --bun run test passes\n- [ ] bun --bun run lint passes","status":"closed","priority":2,"issue_type":"task","owner":"cwk29@icloud.com","created_at":"2026-02-06T00:29:09.576498-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-06T00:56:32.398344-05:00","closed_at":"2026-02-06T00:56:32.398344-05:00","close_reason":"Closed","dependencies":[{"issue_id":"golf-pool-3cj.3","depends_on_id":"golf-pool-3cj","type":"parent-child","created_at":"2026-02-06T00:29:09.579496-05:00","created_by":"Cody Kuykendall"},{"issue_id":"golf-pool-3cj.3","depends_on_id":"golf-pool-3cj.1","type":"blocks","created_at":"2026-02-06T00:31:19.824037-05:00","created_by":"Cody Kuykendall"}]}
{"id":"golf-pool-3cj.4","title":"US-004: Global route protection (everything except login/signup)","description":"As a product owner, I want all non-auth pages protected so that anonymous users cannot access the app.\n\n## Acceptance Criteria\n- [ ] Any route other than /login and /signup requires authentication\n- [ ] Unauthenticated users are redirected to /login\n- [ ] After login, user returns to their originally requested route when possible; otherwise defaults to /leaderboard\n- [ ] Unauthenticated users cannot load protected data via loaders\n- [ ] bun --bun run test passes\n- [ ] bun --bun run lint passes","status":"closed","priority":2,"issue_type":"task","owner":"cwk29@icloud.com","created_at":"2026-02-06T00:29:19.905377-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-06T09:15:49.887728-05:00","closed_at":"2026-02-06T09:15:49.887728-05:00","close_reason":"Closed","dependencies":[{"issue_id":"golf-pool-3cj.4","depends_on_id":"golf-pool-3cj","type":"parent-child","created_at":"2026-02-06T00:29:19.906924-05:00","created_by":"Cody Kuykendall"},{"issue_id":"golf-pool-3cj.4","depends_on_id":"golf-pool-3cj.3","type":"blocks","created_at":"2026-02-06T00:31:30.190374-05:00","created_by":"Cody Kuykendall"}]}
{"id":"golf-pool-3cj.5","title":"US-005: Role rules for admin panel and data import","description":"As an admin/data user, I want access to the admin panel appropriately, and as a regular user I should not see or access it.\n\n## Acceptance Criteria\n- [ ] admin role can access the admin panel and all admin-only functionality\n- [ ] data role can access the admin panel route(s), but within src/routes/admin.tsx only sees the Data Import link (all other admin links/actions hidden)\n- [ ] data role can access the /data-import route\n- [ ] user role cannot access admin routes or /data-import\n- [ ] Unauthorized users see a friendly “Not authorized” screen (not a blank error)\n- [ ] bun --bun run test passes\n- [ ] bun --bun run lint passes","status":"closed","priority":2,"issue_type":"task","owner":"cwk29@icloud.com","created_at":"2026-02-06T00:29:30.300475-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-06T00:39:00.579897-05:00","closed_at":"2026-02-06T00:39:00.579897-05:00","close_reason":"Closed","dependencies":[{"issue_id":"golf-pool-3cj.5","depends_on_id":"golf-pool-3cj","type":"parent-child","created_at":"2026-02-06T00:29:30.302536-05:00","created_by":"Cody Kuykendall"},{"issue_id":"golf-pool-3cj.5","depends_on_id":"golf-pool-3cj.4","type":"blocks","created_at":"2026-02-06T00:31:40.437256-05:00","created_by":"Cody Kuykendall"}]}
{"id":"golf-pool-3cj.6","title":"US-006: Server-side enforcement for mutations (serverFns)","description":"As a commissioner, I want all write operations to be protected so that roles cannot bypass UI checks.\n\n## Acceptance Criteria\n- [ ] Any serverFn that mutates data requires authentication\n- [ ] Role checks are enforced server-side for role-restricted actions (admin-only vs data-import allowed)\n- [ ] Unauthorized serverFn calls return a consistent error shape the UI can handle\n- [ ] bun --bun run test passes\n- [ ] bun --bun run lint passes","status":"closed","priority":3,"issue_type":"task","owner":"cwk29@icloud.com","created_at":"2026-02-06T00:30:18.59985-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-06T01:07:40.300731-05:00","closed_at":"2026-02-06T01:07:40.300731-05:00","close_reason":"Closed","dependencies":[{"issue_id":"golf-pool-3cj.6","depends_on_id":"golf-pool-3cj","type":"parent-child","created_at":"2026-02-06T00:30:18.601464-05:00","created_by":"Cody Kuykendall"},{"issue_id":"golf-pool-3cj.6","depends_on_id":"golf-pool-3cj.5","type":"blocks","created_at":"2026-02-06T00:31:50.765875-05:00","created_by":"Cody Kuykendall"}]}
{"id":"golf-pool-3cj.7","title":"US-007: Tests for auth + authorization behavior","description":"As a developer, I want tests so that auth flows and gating don’t regress.\n\n## Acceptance Criteria\n- [ ] Tests cover: whitelisted vs non-whitelisted signup behavior (including case/trim handling)\n- [ ] Tests cover: global “all routes protected except login/signup” gating logic (loader/guard unit tests as feasible)\n- [ ] Tests cover: data role can access admin panel route but only sees Data Import link in admin nav UI\n- [ ] Tests cover: /data-import access allowed for data and admin, denied for user/unauthenticated\n- [ ] Tests cover: serverFn authorization failures for unauthenticated/unauthorized requests\n- [ ] bun --bun run test passes\n- [ ] bun --bun run lint passes","status":"closed","priority":3,"issue_type":"task","owner":"cwk29@icloud.com","created_at":"2026-02-06T00:30:34.981867-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-08T00:40:04.367024-05:00","closed_at":"2026-02-08T00:40:04.367024-05:00","close_reason":"Completed by agent","dependencies":[{"issue_id":"golf-pool-3cj.7","depends_on_id":"golf-pool-3cj","type":"parent-child","created_at":"2026-02-06T00:30:34.983481-05:00","created_by":"Cody Kuykendall"},{"issue_id":"golf-pool-3cj.7","depends_on_id":"golf-pool-3cj.6","type":"blocks","created_at":"2026-02-06T00:32:13.953732-05:00","created_by":"Cody Kuykendall"}]}
{"id":"golf-pool-3w9","title":"Fix Better-Auth Drizzle schema wiring for auth endpoints","description":"Auth endpoints currently fail with BetterAuthError: '[# Drizzle Adapter]: The model \"user\" was not found in the schema object. Please pass the schema directly to the adapter options.'\\n\\nRepro:\\n1) Run dev server\\n2) POST /api/auth/sign-up/email\\n3) Receive HTTP 500\\n\\nImpact:\\n- Signup/login flows broken\\n- /leaderboard verification flow for manual refresh is blocked without temporary auth bypass\\n\\nLikely fix:\\n- Pass full schema to drizzleAdapter in src/lib/auth.ts and verify auth CRUD tables resolve correctly.","status":"closed","priority":1,"issue_type":"bug","owner":"cwk29@icloud.com","created_at":"2026-02-08T14:53:05.358858-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-08T16:04:55.881121-05:00","closed_at":"2026-02-08T16:04:55.881121-05:00","close_reason":"Completed"}
{"id":"golf-pool-6s0","title":"Fix any type assertions in start.ts redirects","status":"closed","priority":1,"issue_type":"bug","owner":"cwk29@icloud.com","created_at":"2026-02-05T22:28:07.522214-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-05T22:43:58.897885-05:00","closed_at":"2026-02-05T22:43:58.897885-05:00","close_reason":"Closed"}
{"id":"golf-pool-7ff","title":"Fix production build failure with bun sqlite browser externalization","description":"bun --bun run build fails in Vite/Rollup because drizzle bun sqlite driver is imported into browser bundle paths. Update server/client boundaries or db imports so production build succeeds.","status":"closed","priority":1,"issue_type":"bug","owner":"cwk29@icloud.com","created_at":"2026-02-08T00:20:34.793671-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-08T13:59:27.35279-05:00","closed_at":"2026-02-08T13:59:27.35279-05:00","close_reason":"Completed"}
{"id":"golf-pool-c1f","title":"Add button type prop and fix accessibility issues","status":"closed","priority":2,"issue_type":"bug","owner":"cwk29@icloud.com","created_at":"2026-02-05T22:28:23.530392-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-05T22:45:52.958266-05:00","closed_at":"2026-02-05T22:45:52.958266-05:00","close_reason":"Closed"}
{"id":"golf-pool-ceh","title":"Fix import organization in shadcn/ui components","status":"open","priority":3,"issue_type":"task","owner":"cwk29@icloud.com","created_at":"2026-02-05T22:28:31.777643-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-05T22:28:31.777643-05:00"}
{"id":"golf-pool-d9w","title":"Fix global Biome lint baseline failures","description":"The number of diagnostics exceeds the limit allowed. Use --max-diagnostics to increase it.\nDiagnostics not shown: 70.\nChecked 97 files in 48ms. No fixes applied.\nFound 34 errors.\nFound 53 warnings. currently fails with dozens of errors/warnings across shadcn/ui and LiveUpdate components. Resolve baseline lint failures so lint can be used as a quality gate.","status":"closed","priority":2,"issue_type":"task","owner":"cwk29@icloud.com","created_at":"2026-02-08T00:20:17.756785-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-08T00:22:16.962337-05:00","closed_at":"2026-02-08T00:22:16.962337-05:00","close_reason":"Duplicate of golf-pool-qdf."}
{"id":"golf-pool-fxv","title":"Fix route guards to throw TanStack redirect (stop using redirectTo context)","description":"Several routes (e.g. src/routes/__root.tsx, src/routes/login.tsx, src/routes/signup.tsx, src/routes/admin.tsx) return {redirectTo} from beforeLoad; TanStack Router expects throw redirect(). This causes inconsistent browser behavior and makes auth guards unreliable. Replace redirectTo pattern with throw redirect(...) and ensure redirect query is preserved.","status":"open","priority":2,"issue_type":"task","owner":"cwk29@icloud.com","created_at":"2026-02-08T16:04:13.546106-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-08T16:04:37.293123-05:00"}
{"id":"golf-pool-goc","title":"Phase 2: Auth Regression Verification and Status Reconciliation","description":"Validate that previously completed auth/role protections remain stable and align PHASE2 status documentation with actual implementation state.\n\nScope:\n- Regression checks for admin/data-import route and mutation protections\n- PHASE2-STATUS.md reconciliation for stale remaining-work claims","status":"open","priority":2,"issue_type":"epic","owner":"cwk29@icloud.com","created_at":"2026-02-08T12:22:32.625742-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-08T12:22:32.625742-05:00","external_ref":"prd:./tasks/prd-phase2-remaining-high-priority.md#epic-auth-reconcile"}
{"id":"golf-pool-goc.1","title":"US-009: Add auth regression verification for admin/data-import protections","description":"As a maintainer, I want regression coverage for role-gated routes and mutation permissions so previously completed auth protection remains stable.\n\n## Acceptance Criteria\n- [ ] Tests verify unauthenticated and `user` role cannot access admin/data-import flows.\n- [ ] Tests verify `data` role access remains limited to intended admin capabilities.\n- [ ] Tests verify server-side mutation authorization remains enforced.\n- [ ] `bun --bun run check` executed; existing unrelated baseline check failures are allowed, but there are no new check failures introduced by touched files.\n- [ ] `bun --bun run test` passes.\n- [ ] `bun --bun run build` passes.","status":"open","priority":2,"issue_type":"task","owner":"cwk29@icloud.com","created_at":"2026-02-08T12:26:32.860509-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-08T12:26:32.860509-05:00","dependencies":[{"issue_id":"golf-pool-goc.1","depends_on_id":"golf-pool-goc","type":"parent-child","created_at":"2026-02-08T12:26:32.863795-05:00","created_by":"Cody Kuykendall"}]}
{"id":"golf-pool-goc.2","title":"US-010: Reconcile Phase 2 status document with implemented auth work","description":"As a project owner, I want `PHASE2-STATUS.md` updated to reflect completed auth protection so remaining work tracking is accurate.\n\n## Acceptance Criteria\n- [ ] Remove or adjust stale \"admin authentication protection\" as an open high-priority task.\n- [ ] Document current remaining high-priority items as manual refresh leaderboard and CSV import pipeline.\n- [ ] Keep status narrative consistent with shipped code and open beads.\n- [ ] `bun --bun run check` executed; existing unrelated baseline check failures are allowed, but there are no new check failures introduced by touched files.\n- [ ] `bun --bun run test` passes.\n- [ ] `bun --bun run build` passes.","status":"open","priority":2,"issue_type":"task","owner":"cwk29@icloud.com","created_at":"2026-02-08T12:26:52.242509-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-08T12:26:52.242509-05:00","dependencies":[{"issue_id":"golf-pool-goc.2","depends_on_id":"golf-pool-goc","type":"parent-child","created_at":"2026-02-08T12:26:52.24458-05:00","created_by":"Cody Kuykendall"},{"issue_id":"golf-pool-goc.2","depends_on_id":"golf-pool-goc.1","type":"blocks","created_at":"2026-02-08T12:27:07.430289-05:00","created_by":"Cody Kuykendall"}]}
{"id":"golf-pool-lju","title":"Fix breadcrumb accessibility issues (focusable, semantic elements)","status":"closed","priority":2,"issue_type":"bug","owner":"cwk29@icloud.com","created_at":"2026-02-05T22:28:36.610176-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-05T22:45:21.017915-05:00","closed_at":"2026-02-05T22:45:21.017915-05:00","close_reason":"Closed"}
{"id":"golf-pool-lra","title":"Fix React import type issues in shadcn/ui components","status":"closed","priority":2,"issue_type":"bug","owner":"cwk29@icloud.com","created_at":"2026-02-05T22:28:04.123657-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-05T22:46:22.9464-05:00","closed_at":"2026-02-05T22:46:22.9464-05:00","close_reason":"Closed"}
{"id":"golf-pool-nvy","title":"Fix useEffect dependencies in LiveUpdate component","status":"closed","priority":2,"issue_type":"bug","owner":"cwk29@icloud.com","created_at":"2026-02-05T22:28:11.240502-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-05T22:46:02.776727-05:00","closed_at":"2026-02-05T22:46:02.776727-05:00","close_reason":"Closed"}
{"id":"golf-pool-nxa","title":"Phase 2: Leaderboard Freshness (Manual Refresh)","description":"Deliver high-priority leaderboard freshness work using manual refresh only.\n\nScope:\n- Shared leaderboard snapshot query for deterministic refresh behavior\n- Manual refresh UX in /leaderboard\n- Regression tests for refresh behavior and explicit no-auto-polling constraint\n\nOut of scope:\n- Polling, WebSocket, SSE","status":"open","priority":1,"issue_type":"epic","owner":"cwk29@icloud.com","created_at":"2026-02-08T12:21:38.116355-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-08T12:21:38.116355-05:00","external_ref":"prd:./tasks/prd-phase2-remaining-high-priority.md"}
{"id":"golf-pool-nxa.1","title":"US-001: Extract leaderboard snapshot query for refresh-safe loading","description":"As a developer, I want leaderboard aggregation logic in a reusable server-side function so that manual refresh uses a single deterministic data path.\n\n## Acceptance Criteria\n- [ ] Leaderboard score aggregation and sorting logic is moved into a reusable server-side module/function.\n- [ ] `src/routes/leaderboard.tsx` loader uses the reusable function.\n- [ ] Returned payload includes `lastUpdatedAt` timestamp for UI display.\n- [ ] No behavior regression in ranking, segment totals, or pagination.\n- [ ] `bun --bun run check` executed; existing unrelated baseline check failures are allowed, but there are no new check failures introduced by touched files.\n- [ ] `bun --bun run test` passes.\n- [ ] `bun --bun run build` passes.","status":"closed","priority":1,"issue_type":"task","owner":"cwk29@icloud.com","created_at":"2026-02-08T12:22:51.865819-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-08T14:13:40.831387-05:00","closed_at":"2026-02-08T14:13:40.831387-05:00","close_reason":"Completed","dependencies":[{"issue_id":"golf-pool-nxa.1","depends_on_id":"golf-pool-nxa","type":"parent-child","created_at":"2026-02-08T12:22:51.870037-05:00","created_by":"Cody Kuykendall"}]}
{"id":"golf-pool-nxa.2","title":"US-002: Add manual refresh controls to leaderboard UI","description":"As a league member, I want to manually refresh standings so that I can fetch the latest imported results on demand.\n\n## Acceptance Criteria\n- [ ] Leaderboard page includes a visible manual refresh control.\n- [ ] Clicking refresh re-runs loader data fetch and updates standings without a full page reload.\n- [ ] UI shows refresh-in-progress state and updates visible `lastUpdatedAt` time.\n- [ ] Auto polling is not enabled.\n- [ ] `bun --bun run check` executed; existing unrelated baseline check failures are allowed, but there are no new check failures introduced by touched files.\n- [ ] `bun --bun run test` passes.\n- [ ] `bun --bun run build` passes.\n- [ ] UI behavior verified in browser using the `agent-browser` skill.","notes":"Manual refresh control implemented in src/routes/leaderboard.tsx (router.invalidate + in-progress state + timestamp display wiring).\\n\\nBrowser verification attempted with agent-browser but blocked by auth backend failure (see golf-pool-3w9).","status":"closed","priority":1,"issue_type":"task","owner":"cwk29@icloud.com","created_at":"2026-02-08T12:23:09.37639-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-08T16:05:00.971931-05:00","closed_at":"2026-02-08T16:05:00.971931-05:00","close_reason":"Completed","dependencies":[{"issue_id":"golf-pool-nxa.2","depends_on_id":"golf-pool-nxa","type":"parent-child","created_at":"2026-02-08T12:23:09.37862-05:00","created_by":"Cody Kuykendall"},{"issue_id":"golf-pool-nxa.2","depends_on_id":"golf-pool-nxa.1","type":"blocks","created_at":"2026-02-08T12:23:43.892613-05:00","created_by":"Cody Kuykendall"},{"issue_id":"golf-pool-nxa.2","depends_on_id":"golf-pool-3w9","type":"blocks","created_at":"2026-02-08T14:53:23.478502-05:00","created_by":"Cody Kuykendall"}]}
{"id":"golf-pool-nxa.3","title":"US-003: Add tests for leaderboard refresh behavior","description":"As a maintainer, I want tests for refresh interactions so manual-refresh behavior does not regress.\n\n## Acceptance Criteria\n- [ ] Tests cover manual refresh trigger behavior.\n- [ ] Tests verify no auto polling behavior is introduced.\n- [ ] Tests verify refresh/loading state transitions.\n- [ ] `bun --bun run check` executed; existing unrelated baseline check failures are allowed, but there are no new check failures introduced by touched files.\n- [ ] `bun --bun run test` passes.\n- [ ] `bun --bun run build` passes.","status":"open","priority":2,"issue_type":"task","owner":"cwk29@icloud.com","created_at":"2026-02-08T12:23:25.955897-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-08T12:23:25.955897-05:00","dependencies":[{"issue_id":"golf-pool-nxa.3","depends_on_id":"golf-pool-nxa","type":"parent-child","created_at":"2026-02-08T12:23:25.957919-05:00","created_by":"Cody Kuykendall"},{"issue_id":"golf-pool-nxa.3","depends_on_id":"golf-pool-nxa.2","type":"blocks","created_at":"2026-02-08T12:23:54.215375-05:00","created_by":"Cody Kuykendall"}]}
{"id":"golf-pool-qdf","title":"Fix global Biome lint baseline failures","description":"bun --bun run lint currently fails with dozens of errors and warnings across shadcn/ui and LiveUpdate components. Resolve baseline lint failures so lint can be used as a quality gate.","status":"closed","priority":2,"issue_type":"task","owner":"cwk29@icloud.com","created_at":"2026-02-08T00:20:34.781586-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-08T13:43:29.805222-05:00","closed_at":"2026-02-08T13:43:29.805222-05:00","close_reason":"Completed"}
{"id":"golf-pool-sl0","title":"Investigate and remove window.React shim (React is not defined in production bundle)","description":"Production bundle hit runtime error 'React is not defined' during browser verification. A temporary shim sets window.React in src/routes/__root.tsx. Identify the true cause (a dependency expecting global React or bundler config) and remove the shim.","status":"open","priority":2,"issue_type":"bug","owner":"cwk29@icloud.com","created_at":"2026-02-08T16:04:13.543958-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-08T16:04:37.293178-05:00"}
{"id":"golf-pool-u7l","title":"Fix production build failure with bun:sqlite browser externalization","description":"vite v7.3.1 building client environment for production...\ntransforming...\n\n[@tanstack/devtools-vite] Removed devtools code from: /src/routes/__root.tsx\n\n✓ 2218 modules transformed. fails in Vite/Rollup: drizzle bun-sqlite driver imports  in browser bundle path. Update server/client boundaries or db imports so production build succeeds.","status":"closed","priority":1,"issue_type":"bug","owner":"cwk29@icloud.com","created_at":"2026-02-08T00:20:20.166567-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-08T00:22:27.473349-05:00","closed_at":"2026-02-08T00:22:27.473349-05:00","close_reason":"Duplicate of golf-pool-7ff."}
{"id":"golf-pool-ylb","title":"Phase 2: CSV Import Workflow (Validate, Preview, Commit)","description":"Deliver high-priority data import implementation for /data-import.\n\nScope:\n- CSV parser hardening with row-level diagnostics\n- Server-side preview validation against tournaments/golfers\n- UI wiring for file selection, preview, and strict commit gating\n- Commit path only when preview is clean\n- Automated tests for parser/preview/guardrails\n\nOut of scope:\n- Import history/audit trail persistence","status":"open","priority":1,"issue_type":"epic","owner":"cwk29@icloud.com","created_at":"2026-02-08T12:22:15.86437-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-08T12:22:15.86437-05:00","external_ref":"prd:./tasks/prd-phase2-remaining-high-priority.md#epic-import"}
{"id":"golf-pool-ylb.1","title":"US-004: Harden CSV parsing with row-level diagnostics","description":"As a data manager, I want parser-level validation feedback per row so I can fix malformed uploads before import.\n\n## Acceptance Criteria\n- [ ] CSV parser returns normalized rows plus row-level errors/warnings.\n- [ ] Validation covers required columns, invalid rank values, and malformed rows.\n- [ ] Parser utilities clearly separate parse errors from domain validation errors.\n- [ ] `bun --bun run check` executed; existing unrelated baseline check failures are allowed, but there are no new check failures introduced by touched files.\n- [ ] `bun --bun run test` passes.\n- [ ] `bun --bun run build` passes.","status":"closed","priority":1,"issue_type":"task","owner":"cwk29@icloud.com","created_at":"2026-02-08T12:24:09.47409-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-10T00:59:50.444743-05:00","closed_at":"2026-02-10T00:59:50.444743-05:00","close_reason":"Completed CSV parser with row-level diagnostics and tests","dependencies":[{"issue_id":"golf-pool-ylb.1","depends_on_id":"golf-pool-ylb","type":"parent-child","created_at":"2026-02-08T12:24:09.476851-05:00","created_by":"Cody Kuykendall"}]}
{"id":"golf-pool-ylb.2","title":"US-005: Implement server-side preview validation for imports","description":"As a data manager, I want a preview endpoint that validates CSV content against known tournaments and golfers before any database writes.\n\n## Acceptance Criteria\n- [ ] Add server function that accepts CSV content (or parsed payload) and returns preview summary with row-level issues.\n- [ ] Preview validates tournament IDs and golfer names against DB records.\n- [ ] Preview performs no scoring table writes.\n- [ ] Response format is stable for UI rendering.\n- [ ] `bun --bun run check` executed; existing unrelated baseline check failures are allowed, but there are no new check failures introduced by touched files.\n- [ ] `bun --bun run test` passes.\n- [ ] `bun --bun run build` passes.","status":"closed","priority":1,"issue_type":"task","owner":"cwk29@icloud.com","created_at":"2026-02-08T12:24:30.791157-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-10T01:04:28.808924-05:00","closed_at":"2026-02-10T01:04:28.808924-05:00","close_reason":"Completed server-side preview validation with tournament/golfer validation","dependencies":[{"issue_id":"golf-pool-ylb.2","depends_on_id":"golf-pool-ylb","type":"parent-child","created_at":"2026-02-08T12:24:30.79333-05:00","created_by":"Cody Kuykendall"},{"issue_id":"golf-pool-ylb.2","depends_on_id":"golf-pool-ylb.1","type":"blocks","created_at":"2026-02-08T12:25:44.797206-05:00","created_by":"Cody Kuykendall"}]}
{"id":"golf-pool-ylb.3","title":"US-006: Wire data-import UI to file selection and preview","description":"As a data manager, I want to upload a file and see a preview with errors so I can confirm data correctness before committing.\n\n## Acceptance Criteria\n- [ ] Data-import route supports selecting/dropping a CSV file and reading file contents.\n- [ ] UI calls preview server function and renders row-level errors/warnings.\n- [ ] UI clearly separates valid rows and invalid rows.\n- [ ] Commit/import action is disabled when any blocking validation error exists.\n- [ ] `bun --bun run check` executed; existing unrelated baseline check failures are allowed, but there are no new check failures introduced by touched files.\n- [ ] `bun --bun run test` passes.\n- [ ] `bun --bun run build` passes.\n- [ ] UI behavior verified in browser using the `agent-browser` skill.","status":"closed","priority":1,"issue_type":"task","owner":"cwk29@icloud.com","created_at":"2026-02-08T12:24:50.03302-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-10T01:11:30.061916-05:00","closed_at":"2026-02-10T01:11:30.061916-05:00","close_reason":"Completed UI wiring for file selection and preview functionality","dependencies":[{"issue_id":"golf-pool-ylb.3","depends_on_id":"golf-pool-ylb","type":"parent-child","created_at":"2026-02-08T12:24:50.035715-05:00","created_by":"Cody Kuykendall"},{"issue_id":"golf-pool-ylb.3","depends_on_id":"golf-pool-ylb.2","type":"blocks","created_at":"2026-02-08T12:25:55.118581-05:00","created_by":"Cody Kuykendall"}]}
{"id":"golf-pool-ylb.4","title":"US-007: Commit validated import and show write summary","description":"As a data manager, I want to commit a clean preview so scoring data is written only after validation passes.\n\n## Acceptance Criteria\n- [ ] Commit action calls import server function with validated rows.\n- [ ] Import writes scoring rows and returns count + summary.\n- [ ] UI shows success/failure summary and reset path for next upload.\n- [ ] Commit is blocked when preview includes blocking errors.\n- [ ] `bun --bun run check` executed; existing unrelated baseline check failures are allowed, but there are no new check failures introduced by touched files.\n- [ ] `bun --bun run test` passes.\n- [ ] `bun --bun run build` passes.\n- [ ] UI behavior verified in browser using the `agent-browser` skill.","status":"closed","priority":1,"issue_type":"task","owner":"cwk29@icloud.com","created_at":"2026-02-08T12:25:09.921182-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-10T01:15:04.070207-05:00","closed_at":"2026-02-10T01:15:04.070207-05:00","close_reason":"Completed commit functionality with database write and summary","dependencies":[{"issue_id":"golf-pool-ylb.4","depends_on_id":"golf-pool-ylb","type":"parent-child","created_at":"2026-02-08T12:25:09.923442-05:00","created_by":"Cody Kuykendall"},{"issue_id":"golf-pool-ylb.4","depends_on_id":"golf-pool-ylb.3","type":"blocks","created_at":"2026-02-08T12:26:05.483524-05:00","created_by":"Cody Kuykendall"}]}
{"id":"golf-pool-ylb.5","title":"US-008: Add tests for import parser, preview, and commit guardrails","description":"As a maintainer, I want automated tests around import validation and commit restrictions so bad data cannot slip through regressions.\n\n## Acceptance Criteria\n- [ ] Unit tests cover parser diagnostics and rank/field validation.\n- [ ] Server function tests cover preview behavior and no-write guarantee.\n- [ ] UI/integration tests cover commit disabled on validation errors.\n- [ ] `bun --bun run check` executed; existing unrelated baseline check failures are allowed, but there are no new check failures introduced by touched files.\n- [ ] `bun --bun run test` passes.\n- [ ] `bun --bun run build` passes.","status":"closed","priority":2,"issue_type":"task","owner":"cwk29@icloud.com","created_at":"2026-02-08T12:25:29.10768-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-10T01:24:09.718705-05:00","closed_at":"2026-02-10T01:24:09.718705-05:00","close_reason":"Completed comprehensive tests for import parser, preview, and commit guardrails","dependencies":[{"issue_id":"golf-pool-ylb.5","depends_on_id":"golf-pool-ylb","type":"parent-child","created_at":"2026-02-08T12:25:29.110142-05:00","created_by":"Cody Kuykendall"},{"issue_id":"golf-pool-ylb.5","depends_on_id":"golf-pool-ylb.4","type":"blocks","created_at":"2026-02-08T12:26:15.825009-05:00","created_by":"Cody Kuykendall"}]}
