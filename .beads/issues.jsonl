{"id":"golf-pool-3cj","title":"Better-Auth flows + whitelist + role gating","description":"Wire up Better-Auth email/password auth with whitelist signup + role gating.\n\nKey rules:\n- Only public routes: /login and /signup\n- Post-login default route: /leaderboard\n- data role can access admin panel but only sees the Data Import link in src/routes/admin.tsx and can access /data-import\n- Enforce role checks in UI, route loaders, and serverFns that mutate data","status":"open","priority":2,"issue_type":"epic","owner":"cwk29@icloud.com","created_at":"2026-02-06T00:27:58.894129-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-06T00:27:58.894129-05:00","external_ref":"prd:./tasks/prd-better-auth.md"}
{"id":"golf-pool-3cj.1","title":"US-001: Auth API wiring and session retrieval","description":"As a user, I want my session to persist so that I stay logged in across refreshes.\n\n## Acceptance Criteria\n- [ ] Auth API endpoint is available (e.g. /api/auth/*) and correctly handled by the Start server entry\n- [ ] Client can reliably fetch session state (authenticated/unauthenticated + role)\n- [ ] Session retrieval works on initial page load and after navigation\n- [ ] Logout clears session and UI updates immediately\n- [ ] bun --bun run test passes\n- [ ] bun --bun run lint passes","status":"closed","priority":1,"issue_type":"task","owner":"cwk29@icloud.com","created_at":"2026-02-06T00:28:48.765246-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-07T21:55:41.471622-05:00","closed_at":"2026-02-07T21:55:41.471622-05:00","close_reason":"Auth API wiring and session retrieval implemented with useAuth hook, enhanced Header component with logout functionality, and session persistence across page loads and navigation","dependencies":[{"issue_id":"golf-pool-3cj.1","depends_on_id":"golf-pool-3cj","type":"parent-child","created_at":"2026-02-06T00:28:48.772232-05:00","created_by":"Cody Kuykendall"}]}
{"id":"golf-pool-3cj.2","title":"US-002: Signup flow with whitelist enforcement","description":"As an allowed user, I want to sign up with email/password so that I can access the app.\n\n## Acceptance Criteria\n- [ ] /signup route renders signup form (email + password)\n- [ ] Signup validates whitelist using whitelist.json with rules: trim + lowercase + exact match\n- [ ] Non-whitelisted signup fails with a generic “not allowed” message (no additional disclosure)\n- [ ] Whitelisted signup succeeds and lands user in a logged-in state\n- [ ] bun --bun run test passes\n- [ ] bun --bun run lint passes","status":"open","priority":1,"issue_type":"task","owner":"cwk29@icloud.com","created_at":"2026-02-06T00:28:59.226627-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-07T02:41:22.54349-05:00","dependencies":[{"issue_id":"golf-pool-3cj.2","depends_on_id":"golf-pool-3cj","type":"parent-child","created_at":"2026-02-06T00:28:59.230399-05:00","created_by":"Cody Kuykendall"},{"issue_id":"golf-pool-3cj.2","depends_on_id":"golf-pool-3cj.1","type":"blocks","created_at":"2026-02-06T00:31:09.479177-05:00","created_by":"Cody Kuykendall"}]}
{"id":"golf-pool-3cj.3","title":"US-003: Login flow and default redirect","description":"As a user with an account, I want to log in so that I can use the app.\n\n## Acceptance Criteria\n- [ ] /login route renders login form (email + password)\n- [ ] Successful login redirects to /leaderboard\n- [ ] Invalid credentials show a safe, clear error message\n- [ ] Logged-in users visiting /login or /signup are redirected to /leaderboard\n- [ ] bun --bun run test passes\n- [ ] bun --bun run lint passes","status":"closed","priority":2,"issue_type":"task","owner":"cwk29@icloud.com","created_at":"2026-02-06T00:29:09.576498-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-06T00:56:32.398344-05:00","closed_at":"2026-02-06T00:56:32.398344-05:00","close_reason":"Closed","dependencies":[{"issue_id":"golf-pool-3cj.3","depends_on_id":"golf-pool-3cj","type":"parent-child","created_at":"2026-02-06T00:29:09.579496-05:00","created_by":"Cody Kuykendall"},{"issue_id":"golf-pool-3cj.3","depends_on_id":"golf-pool-3cj.1","type":"blocks","created_at":"2026-02-06T00:31:19.824037-05:00","created_by":"Cody Kuykendall"}]}
{"id":"golf-pool-3cj.4","title":"US-004: Global route protection (everything except login/signup)","description":"As a product owner, I want all non-auth pages protected so that anonymous users cannot access the app.\n\n## Acceptance Criteria\n- [ ] Any route other than /login and /signup requires authentication\n- [ ] Unauthenticated users are redirected to /login\n- [ ] After login, user returns to their originally requested route when possible; otherwise defaults to /leaderboard\n- [ ] Unauthenticated users cannot load protected data via loaders\n- [ ] bun --bun run test passes\n- [ ] bun --bun run lint passes","status":"closed","priority":2,"issue_type":"task","owner":"cwk29@icloud.com","created_at":"2026-02-06T00:29:19.905377-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-06T09:15:49.887728-05:00","closed_at":"2026-02-06T09:15:49.887728-05:00","close_reason":"Closed","dependencies":[{"issue_id":"golf-pool-3cj.4","depends_on_id":"golf-pool-3cj","type":"parent-child","created_at":"2026-02-06T00:29:19.906924-05:00","created_by":"Cody Kuykendall"},{"issue_id":"golf-pool-3cj.4","depends_on_id":"golf-pool-3cj.3","type":"blocks","created_at":"2026-02-06T00:31:30.190374-05:00","created_by":"Cody Kuykendall"}]}
{"id":"golf-pool-3cj.5","title":"US-005: Role rules for admin panel and data import","description":"As an admin/data user, I want access to the admin panel appropriately, and as a regular user I should not see or access it.\n\n## Acceptance Criteria\n- [ ] admin role can access the admin panel and all admin-only functionality\n- [ ] data role can access the admin panel route(s), but within src/routes/admin.tsx only sees the Data Import link (all other admin links/actions hidden)\n- [ ] data role can access the /data-import route\n- [ ] user role cannot access admin routes or /data-import\n- [ ] Unauthorized users see a friendly “Not authorized” screen (not a blank error)\n- [ ] bun --bun run test passes\n- [ ] bun --bun run lint passes","status":"closed","priority":2,"issue_type":"task","owner":"cwk29@icloud.com","created_at":"2026-02-06T00:29:30.300475-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-06T00:39:00.579897-05:00","closed_at":"2026-02-06T00:39:00.579897-05:00","close_reason":"Closed","dependencies":[{"issue_id":"golf-pool-3cj.5","depends_on_id":"golf-pool-3cj","type":"parent-child","created_at":"2026-02-06T00:29:30.302536-05:00","created_by":"Cody Kuykendall"},{"issue_id":"golf-pool-3cj.5","depends_on_id":"golf-pool-3cj.4","type":"blocks","created_at":"2026-02-06T00:31:40.437256-05:00","created_by":"Cody Kuykendall"}]}
{"id":"golf-pool-3cj.6","title":"US-006: Server-side enforcement for mutations (serverFns)","description":"As a commissioner, I want all write operations to be protected so that roles cannot bypass UI checks.\n\n## Acceptance Criteria\n- [ ] Any serverFn that mutates data requires authentication\n- [ ] Role checks are enforced server-side for role-restricted actions (admin-only vs data-import allowed)\n- [ ] Unauthorized serverFn calls return a consistent error shape the UI can handle\n- [ ] bun --bun run test passes\n- [ ] bun --bun run lint passes","status":"closed","priority":3,"issue_type":"task","owner":"cwk29@icloud.com","created_at":"2026-02-06T00:30:18.59985-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-06T01:07:40.300731-05:00","closed_at":"2026-02-06T01:07:40.300731-05:00","close_reason":"Closed","dependencies":[{"issue_id":"golf-pool-3cj.6","depends_on_id":"golf-pool-3cj","type":"parent-child","created_at":"2026-02-06T00:30:18.601464-05:00","created_by":"Cody Kuykendall"},{"issue_id":"golf-pool-3cj.6","depends_on_id":"golf-pool-3cj.5","type":"blocks","created_at":"2026-02-06T00:31:50.765875-05:00","created_by":"Cody Kuykendall"}]}
{"id":"golf-pool-3cj.7","title":"US-007: Tests for auth + authorization behavior","description":"As a developer, I want tests so that auth flows and gating don’t regress.\n\n## Acceptance Criteria\n- [ ] Tests cover: whitelisted vs non-whitelisted signup behavior (including case/trim handling)\n- [ ] Tests cover: global “all routes protected except login/signup” gating logic (loader/guard unit tests as feasible)\n- [ ] Tests cover: data role can access admin panel route but only sees Data Import link in admin nav UI\n- [ ] Tests cover: /data-import access allowed for data and admin, denied for user/unauthenticated\n- [ ] Tests cover: serverFn authorization failures for unauthenticated/unauthorized requests\n- [ ] bun --bun run test passes\n- [ ] bun --bun run lint passes","status":"open","priority":3,"issue_type":"task","owner":"cwk29@icloud.com","created_at":"2026-02-06T00:30:34.981867-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-07T02:41:22.853445-05:00","dependencies":[{"issue_id":"golf-pool-3cj.7","depends_on_id":"golf-pool-3cj","type":"parent-child","created_at":"2026-02-06T00:30:34.983481-05:00","created_by":"Cody Kuykendall"},{"issue_id":"golf-pool-3cj.7","depends_on_id":"golf-pool-3cj.6","type":"blocks","created_at":"2026-02-06T00:32:13.953732-05:00","created_by":"Cody Kuykendall"}]}
{"id":"golf-pool-6s0","title":"Fix any type assertions in start.ts redirects","status":"closed","priority":1,"issue_type":"bug","owner":"cwk29@icloud.com","created_at":"2026-02-05T22:28:07.522214-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-05T22:43:58.897885-05:00","closed_at":"2026-02-05T22:43:58.897885-05:00","close_reason":"Closed"}
{"id":"golf-pool-c1f","title":"Add button type prop and fix accessibility issues","status":"closed","priority":2,"issue_type":"bug","owner":"cwk29@icloud.com","created_at":"2026-02-05T22:28:23.530392-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-05T22:45:52.958266-05:00","closed_at":"2026-02-05T22:45:52.958266-05:00","close_reason":"Closed"}
{"id":"golf-pool-ceh","title":"Fix import organization in shadcn/ui components","status":"open","priority":3,"issue_type":"task","owner":"cwk29@icloud.com","created_at":"2026-02-05T22:28:31.777643-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-05T22:28:31.777643-05:00"}
{"id":"golf-pool-lju","title":"Fix breadcrumb accessibility issues (focusable, semantic elements)","status":"closed","priority":2,"issue_type":"bug","owner":"cwk29@icloud.com","created_at":"2026-02-05T22:28:36.610176-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-05T22:45:21.017915-05:00","closed_at":"2026-02-05T22:45:21.017915-05:00","close_reason":"Closed"}
{"id":"golf-pool-lra","title":"Fix React import type issues in shadcn/ui components","status":"closed","priority":2,"issue_type":"bug","owner":"cwk29@icloud.com","created_at":"2026-02-05T22:28:04.123657-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-05T22:46:22.9464-05:00","closed_at":"2026-02-05T22:46:22.9464-05:00","close_reason":"Closed"}
{"id":"golf-pool-nvy","title":"Fix useEffect dependencies in LiveUpdate component","status":"closed","priority":2,"issue_type":"bug","owner":"cwk29@icloud.com","created_at":"2026-02-05T22:28:11.240502-05:00","created_by":"Cody Kuykendall","updated_at":"2026-02-05T22:46:02.776727-05:00","closed_at":"2026-02-05T22:46:02.776727-05:00","close_reason":"Closed"}
